# ************************************************************************************************
# Warning: YAML source code for Canvas Apps is in preview. The schema is being actively developed.
# Content may be incomplete and subject to change.
# This file is read-only and should only be used to review changes made within Power Apps Studio.
# This file isn't used when loading the app. External editing, merging and conflict resolution are
# not supported.
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Login Screen:
    Properties:
      ImagePosition: =ImagePosition.Stretch
      OnVisible: |-
        =Set(Labeltxt,false);
        UpdateContext({Var_Password_Visible: !Var_Password_Visible});
    Children:
      - Container8:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.ExtraBold
            Height: =1136
            Width: =640
          Children:
            - Label1_3:
                Control: Label@2.5.1
                Properties:
                  Color: =RGBA(51, 0, 153, 1)
                  FontWeight: =FontWeight.Semibold
                  Size: =25
                  Text: ="Password"
                  X: =29
                  Y: =523
            - Label1_4:
                Control: Label@2.5.1
                Properties:
                  Color: =RGBA(51, 0, 153, 1)
                  FontWeight: =FontWeight.Semibold
                  Size: =26
                  Text: ="UserName/Email"
                  X: =29
                  Y: =370
            - TextInput1_2:
                Control: Classic/TextInput@2.3.2
                Properties:
                  BorderColor: =RGBA(51, 0, 153, 1)
                  Default: =""
                  Height: =72
                  HintText: ="example@gmail.com"
                  HoverFill: =RGBA(0, 0, 0, 0)
                  OnSelect: =Set(Labeltxt,false)
                  PressedBorderColor: =RGBA(51, 0, 153, 1)
                  RadiusBottomLeft: =25
                  RadiusBottomRight: =25
                  RadiusTopLeft: =25
                  RadiusTopRight: =25
                  Width: =581
                  X: =29
                  Y: =440
            - TextInput1_3:
                Control: Classic/TextInput@2.3.2
                Properties:
                  BorderColor: =RGBA(51, 0, 153, 1)
                  Default: =""
                  Height: =69
                  HoverFill: =RGBA(0, 0, 0, 0)
                  Mode: =If(Var_Password_Visible,TextMode.SingleLine, TextMode.Password)
                  OnSelect: =
                  RadiusBottomLeft: =25
                  RadiusBottomRight: =25
                  RadiusTopLeft: =25
                  RadiusTopRight: =25
                  Width: =581
                  X: =29
                  Y: =593
            - Button1_1:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 0)
                  BorderThickness: =0
                  Color: =RGBA(255, 136, 0, 1)
                  DisabledColor: =RGBA(0, 0, 0, 0)
                  DisabledFill: =RGBA(0, 0, 0, 0)
                  Fill: =RGBA(0, 0, 0, 0)
                  Height: =44
                  HoverBorderColor: =
                  HoverColor: =RGBA(184, 0, 0, 1)
                  HoverFill: =RGBA(0, 0, 0, 0)
                  OnSelect: =Navigate('Sign Up',ScreenTransition.Cover)
                  PressedBorderColor: =
                  PressedFill: =
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                  Text: ="Sign Up"
                  Width: =156
                  X: =433
                  Y: =985
            - Image1:
                Control: Image@2.2.3
                Properties:
                  Height: =330
                  Image: ='MY AGENT PNG'
                  Width: =489
                  X: =Parent.Width/2-Self.Width/2
                  Y: =40
            - Button8:
                Control: Classic/Button@2.2.0
                Properties:
                  BorderColor: =
                  BorderThickness: =0
                  Color: =RGBA(51, 0, 153, 1)
                  Fill: =RGBA(0, 0, 0, 0)
                  Height: =90
                  HoverColor: =RGBA(184, 0, 0, 1)
                  HoverFill: =ColorFade(RGBA(00, 11, 11, 11), 11)
                  OnSelect: =Navigate('Forgot password',ScreenTransition.Cover)
                  PressedFill: =
                  Text: ="ForgotÂ Password?"
                  Width: =448
                  X: =95
                  Y: =742
            - Container5:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  DropShadow: =DropShadow.Bold
                  Height: =84
                  Width: =254
                  X: =200
                  Y: =866
                Children:
                  - Button1_2:
                      Control: Classic/Button@2.2.0
                      Properties:
                        BorderThickness: =0
                        Color: =RGBA(255, 255, 255, 1)
                        Fill: =RGBA(51, 0, 153, 1)
                        Height: =84
                        HoverColor: =RGBA(255, 255, 255, 1)
                        OnSelect: |-
                          = If(
                          !IsBlank(TextInput1_2.Text) && !IsBlank(TextInput1_3.Text),// Check if login fields are not blank
                          If(
                          !IsBlank(
                          LookUp(
                          Admin1,
                          (Username = TextInput1_2.Text || User_email = TextInput1_2.Text)
                          ).Username
                          ),
                          If(
                          LookUp(
                          Admin1,
                          (Username = TextInput1_2.Text || User_email = TextInput1_2.Text)
                          ).Password = TextInput1_3.Text,
                          Set(CurrentUser, LookUp(Admin1, (Username = TextInput1_2.Text || User_email = TextInput1_2.Text)));
                          Notify(
                          "Login Successful!",
                          NotificationType.Success
                          )
                          );
                          Navigate('Home Screen'),// Navigate to HomeScreen with notification
                          Notify(
                          Set(Labeltxt,true); "Wrong Password Or Username",
                          NotificationType.Error
                          )// Show notification for incorrect login details
                          ),
                          Notify(
                          "Please fill in both username and password.",
                          NotificationType.Error
                          )// Show notification for blank fields
                          );
                          Reset(TextInput1_2);
                          Reset(TextInput1_3);
                        Text: ="Login"
                        Width: =258.25
                        X: =Parent.Width/2-Self.Width/2
            - Icon5_2:
                Control: Classic/Icon@2.5.0
                Properties:
                  Color: =RGBA(51, 0, 153, 1)
                  Icon: |
                    =If(Var_Password_Visible, Icon.View, Icon.Hide)
                  OnSelect: |-
                    =UpdateContext({Var_Password_Visible: !Var_Password_Visible});
                  Width: =46
                  X: =543
                  Y: =598
            - Label1_5:
                Control: Label@2.5.1
                Properties:
                  Align: =Align.Center
                  Color: =RGBA(184, 0, 0, 1)
                  FontWeight: =FontWeight.Semibold
                  Height: =68
                  Size: =20
                  Text: ="Incorrect UserName Or Password!"
                  Visible: =Labeltxt
                  Width: =571
                  X: =41
                  Y: =675
            - Label1_8:
                Control: Label@2.5.1
                Properties:
                  Color: =RGBA(51, 0, 153, 1)
                  FontWeight: =FontWeight.Semibold
                  Size: =25
                  Text: ="Dont have an account?"
                  Width: =368
                  X: =95
                  Y: =972
